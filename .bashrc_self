# PS1
#PS1='\h:\W \u\$ '
git_branch() {
  echo $(git branch --no-color 2>/dev/null | sed -ne "s/^\* \(.*\)$/\1/p")
}
export PS1='\h:\W \u [$(git_branch)\[\033[0m\]] \n$ '

# vim
which nvim > /dev/null 2>&1
if [ $? = 0 ]; then alias vi=nvim; alias vim=nvim; fi

# alias
alias rm="rm -i"
alias cp="cp -i"
alias ssh-keyadd="ssh-add ~/.ssh/id_rsa*"
alias ssh-showpub="ssh-keygen -yf"
alias vimtmp='vim `date +%Y%m%d-%H%M%S`.txt'

# environment variable
export STUID=15k0112
export EDITOR=vim
export PYTHONPATH="~/.twitter:$PYTHONPATH"
bind '"\C-f": forward-word'
bind '"\C-b": backward-word'
ulimit -c unlimited
if [ "$SHELL" = "/bin/bash" ];then stty stop undef; fi

# for each OS
if [ "$(uname)" == 'Darwin' ]; then
  OS='Mac'
  alias l='ls'
  alias ll='ls -lG'
  alias lll='ls -alG'
  alias updatedb='sudo /usr/libexec/locate.updatedb'
  # Slideshare can't display Japanese font. (created from Keynote)
  alias pdfconv="LANG=C LC_ALL=C sed -i '' s'|/Registry (Adobe) /Ordering (Japan1) /Supplement [0-9]|/Registry(Adobe) /Ordering(Identity) /Supplement 0|g'"
  alias vlc="/Applications/VLC.app/Contents/MacOS/VLC"
  alias wma2mp3='if [ ! -d mp3 ];then mkdir mp3; fi; for i in *; do vlc -I dummy --sout "#transcode{acodec=mp3,ab=128,channels=2,samplerate=44100}:std{access=file,mux=raw,dst=\"mp3/${i}.mp3\"}" "${i}" vlc://quit; done'
  export PATH=$PATH:~/bin
  export PATH=/usr/local/bin:$PATH
  export LANG=ja_JP.UTF-8
  export LESSCHARSET=utf-8
  if [ -f /usr/local/etc/bash_completion.d/git-prompt.sh ]; then
    . /usr/local/etc/bash_completion.d/git-prompt.sh
  fi
  if [ -f /usr/local/etc/bash_completion.d/git-completion.bash ];then
    . /usr/local/etc/bash_completion.d/git-completion.bash
  fi
  if [ -f `brew --prefix`/etc/bash_completion ]; then
    . `brew --prefix`/etc/bash_completion
  fi
  if [ -f /Applications/MacVim.app/Contents/Resources/vim/vimrc ];then
    mv /Applications/MacVim.app/Contents/Resources/vim/vimrc{,.default}
  fi
  if [ -f /Applications/MacVim.app/Contents/Resources/vim/gvimrc ];then
    mv /Applications/MacVim.app/Contents/Resources/vim/gvimrc{,.default}
  fi
elif [ "$(uname)" == 'Linux' ]; then
  OS='Linux'
  alias l='ls'
  alias ll='ls -l --color'
  alias lll='ls -al --color'
  alias gcc32='gcc -m32 -fno-stack-protector'
  alias swapsearch='grep VmSwap /proc/*/status | sort -k 2 -r | head'
elif [ "$(uname)" == 'FreeBSD' ]; then
  OS='FreeBSD'
  alias l='ls'
  alias ll='ls -lG'
  alias lll='ls -alG'
  alias updatedb='/usr/libexec/locate.updatedb'
fi
